1. Необходимо создать таблицу "CAR_MODEL" с параметрами:

BRAND: varchar(40)
MODEL: varchar(40)
TYPE: varchar(20)
2. Загрузить справочник автомобилей в таблицу "CAR_MODEL" из файла во вложении "Справочник автомобилей"

3. Необходимо реализовать контролер по подбору марки и модели автомобиля "fill-application-service/api/v1/brand-model?filter="(fill-application-service). 

По "brandFilter" из "fill-application-service/api/v1/brand-model?filter=", необходимо выполнить поиск в CAR_MODEL.BRAND и вернуть в ответе массив:

Марка
Модель
Тип
4. Необходимо реализовать контроллер по подбору продукта "/api/v1/product/choose/options" (fill-application-service). 

5. Необходимо создать таблицы: 

5.1 "PRODUCT" с параметрами:

ID: UUID
NAME:String
CODE:String
CREATED: DateTime
UPDATED: DateTime
ACTIVATION_DATE: Date
DEACTIVATION_DATE: Date
CATEGORY: String
STATUS: String
CREDIT_SUM_MIN:String
CREDIT_SUM_MAX: String
INITIAL_FEE_MIN: String
INITIAL_FEE_MAX: String
TERM_MONTH_MIN: String
TERM_MONTH_MAX: String
RATE: String
5.2 PRODUCT_DIVISION с параметрами: 

ID: UUID
DIVISION_ID: String
PRODUCT_ID: String
6. Загрузить список продуктов в таблицу "PRODUCT" из файла во вложении "Продукты авто"

7. Реализовать логику, при обработке запроса "/api/v1/product/choose/options": 

7.1 Создать таблицу "CATEGORY_PARAM" с параметрами:

CATEGORY: String
CAR_TYPE: String
USED: String
PRODUCTION_YEAR_MIN_OFFSET: Integer
PRODUCTION_YEAR_MAX_OFFSET: Integer
Определить категорию автомобиля "CATEGORY" по таблице "CATEGORY_PARAM":

CAR_TYPE -?
USED: String "/api/v1/product/choose/options"
PRODUCTION_YEAR_MIN_OFFSET: Integer "/api/v1/product/choose/options"
PRODUCTION_YEAR_MAX_OFFSET: Integer "/api/v1/product/choose/options"
Определить категорию, согласно таблице: 

Тип авто (CAR_LIST.TYPE)	Год производства (productionYear)	Новый/С пробегом (used)	Категория авто
Отечественный автомобиль	Год выпуска, не больше текущий +1	Новый	Автомобили-новые российские
Отечественный автомобиль	Год выпуска >= текущий -5 лет	С пробегом	Автомобили-б/у до 5 лет российские
Отечественный автомобиль	Год выпуска >= текущий -10 лет	С пробегом	Автомобили-б/у до 10 лет российские
Отечественный автомобиль	Год выпуска < текущий -10 лет	С пробегом	Автомобили с пробегом старше 10 лет
Иностранный автомобиль	Год выпуска, не больше текущий +1	Новый	Автомобили-новые иностранные
Иностранный автомобиль	Год выпуска >= текущий -5 лет	С пробегом	Автомобили-б/у до 5 лет иност
Иностранный автомобиль	Год выпуска >= текущий -10 лет	С пробегом	Автомобили-б/у до 10 лет иност
Иностранный автомобиль	Год выпуска < текущий -10 лет	С пробегом	Автомобили с пробегом старше 10 лет
7.2 Отобрать продукты, согласно логике:

7.2.1 Сохранить значения из PRODUCT_DIVISION.PRODUCT_ID, где "divisionId" из "/api/v1/product/choose/options" соответствует значению PRODUCT_DIVISION.DIVISION_ID

7.2.2 По отобранным значениям в п.7.2.1 "PRODUCT_DIVISION.PRODUCT_ID" найти продукты в таблице "PRODUCT"

7.2.3 По отобранным продуктам из п. 7.2.2, необходимо отобрать продукты, у которых PRODUCT.CATEGORY = категории авто из п.7.1

7.2.4 По отобранным продуктам из п. 7.2.3, необходимо отобрать продукты, у которых:

PRODUCT.MIN_CREDIT_SUM >= carPrice + сумма всех услуг services/service/sum-initialPayment (все параметры из "/api/v1/product/choose/options")
PRODUCT.MAX_CREDIT_SUM <= carPrice + сумма всех услуг services/service/sum-initialPayment (все параметры из "/api/v1/product/choose/options")
7.2.5 По отобранным продуктам из п. 7.2.4, необходимо отобрать продукты, у которых:

PRODUCT.INITIAL_FEE_MIN >= initialPayment (параметр из "/api/v1/product/choose/options")
PRODUCT.INITIAL_FEE_MAX <= initialPayment (параметр из "/api/v1/product/choose/options")
7.2.6 По отобранным продуктам из п. 7.2.5, необходимо отобрать продукты, у которых:

TERM_MONTH_MIN >= term (параметр из "/api/v1/product/choose/options")
TERM_MONTH_MAX <= term (параметр из "/api/v1/product/choose/options")
7.2.7 По каждому отобранному продукту из 7.2.6, необходимо отправить в ответе "/api/v1/application/{applicationId}/product": 

id = PRODUCT.ID
name = PRODUCT.NAME
creditSumm = carPrice + (сумма всех услуг services/service/sum)-initialPayment
serviceSumm = сумма всех услуг services/service/sum
monthlyPayment = 


Р - размер ежемесячного платежа

О - остаток суммы кредита = carPrice + (сумма всех услуг services/service/sum)-initialPayment (все параметры из "/api/v1/product/choose/options") )

ПС - месячная процентная ставка = рассчитывается как ставка по кредиту "PRODUCT.RATE"/100*12

ПП (-1) - процентные периоды до окончания срока кредита  = term из "/api/v1/product/choose/options"

Пример расчета: Аннуитет.xlsx
