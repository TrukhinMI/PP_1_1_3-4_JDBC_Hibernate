
import CarLoan.Pages.AuthPage;
import CarLoan.Pages.MainPage;
import CarLoan.Pages.NewApplicationPage;
import CarLoan.Pages.GeneralInformationPage;
import CarLoan.Pages.ClientInformationPage;
import CarLoan.Steps.GeneralSteps;
import CarLoan.Steps.NewApplicationStep;
import CarLoan.Steps.GeneralInformationStep;
import CarLoan.Steps.ClientInformationStep;
import Common.Configs.BaseConfig;
import Common.Utils.AdaptavistUtils.AdaptavistConfigUpdater;
import Common.Utils.PropertyLoader;
import org.apache.logging.log4j.Level;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.apache.logging.log4j.core.config.Configurator;
import org.junit.jupiter.api.AfterAll;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.extension.ExtendWith;

import static com.codeborne.selenide.Selenide.open;

@ExtendWith(BaseConfig.class)
public class BaseConfigCarLoan {

    protected static final String baseUrl = new PropertyLoader("CarLoan/configCarLoan").loadProperty("stand_name");
    private static final Logger logger = LogManager.getLogger(BaseConfigCarLoan.class);
    public static AdaptavistConfigUpdater adaptavistConfigUpdater = new AdaptavistConfigUpdater();

    // Устанавливается для возможности делать log.info в тестах
    static {
        Configurator.setAllLevels(LogManager.getRootLogger().getName(), Level.INFO);
    }

    public NewApplicationStep newApplicationStep = new NewApplicationStep();
    public GeneralInformationStep generalInformationStep = new GeneralInformationStep();
    public ClientInformationStep clientInformationStep = new ClientInformationStep();
    public GeneralSteps generalSteps = new GeneralSteps();
    public MainPage mainPage = new MainPage();
    public AuthPage authPage = new AuthPage();
    public GeneralInformationPage generalInformationPage = new GeneralInformationPage();
    public ClientInformationPage clientInformationPage = new ClientInformationPage();
    public NewApplicationPage newApplicationPage = new NewApplicationPage();

    @AfterAll
    public static void updateConfig() {
        //        adaptavistConfigUpdater.updateConfigBasedOnFolder("CarLoan");
    }

    @BeforeEach
    public void openBaseUrl() {
        open(baseUrl);
    }
}
